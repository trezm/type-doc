#!/usr/bin/env node
'use strict';

let filesToTest = [];
let options = {
  strictClassCheck: false,
  isFunctional: false
};

for (let i = 2; i < process.argv.length; i++) {
  switch (process.argv[i]) {
    case '-f':
    case '--functional': {
      options.isFunctional = true;
      break;
    }
    case '-s':
    case '--strict-class-check': {
      options.strictClassCheck = true;
      break;
    }
    default:
      filesToTest = filesToTest.concat(process.argv[i]);
  }
}

const typeChecker = require('../dist/main').main;
filesToTest.map((file) => typeChecker(file, options.isFunctional, options))
  .reduce((a, b) => a.concat(b), [])
  .forEach((result) => {
    console.log(result.toString({ colors: true }));
  });

if (process.env.NODE_ENV === 'test') {
  typeChecker(undefined, false, options);
}
